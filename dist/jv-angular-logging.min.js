"use strict";angular.module("jv.angular-logging",[]),angular.module("jv.angular-logging").service("jvFormat",["$window","$filter","jvLogLevel",function(a,b,c){var d={DATE:function(a,c){return b("date")((new Date).getTime(),a,c)},LEVEL:function(a){return c.getLevelName(a.level)},LEVEL_NUM:function(a){return a.level},HASH:function(){return a.location.hash},MESSAGES:function(a){return a.items},NAME:function(a){return a.name}};return d}]).service("JvFormatter",["jvFormat",function(a){return function(){var b=[].slice.call(arguments,0);return{format:function(c){void 0===b&&(b=[]);for(var d=[],e=0;e<b.length;e++)b[e]===a.MESSAGES?d=d.concat(b[e](c)):d.push("function"==typeof b[e]?b[e](c):b[e]);return d}}}}]),angular.module("jv.angular-logging").service("jvLog",["jvLogging",function(a){return a.getLogger()}]),angular.module("jv.angular-logging").service("jvLogLevel",function(){var a={CRITICAL:50,ERROR:40,WARNING:30,INFO:20,DEBUG:10,NOTSET:0},b={};return b[a.CRITICAL]="CRITICAL",b[a.ERROR]="ERROR",b[a.WARNING]="WARNING",b[a.INFO]="INFO",b[a.DEBUG]="DEBUG",b[a.NOTSET]="NOTSET",a.getLevelName=function(a){return b[a]},a}),angular.module("jv.angular-logging").factory("jvLogging",["jvLogLevel",function(a){var b={},c={},d=function(b){return{level:a.NOTSET,handlers:[],info:function(){var b=[].slice.call(arguments,0);this.handle(this.makeRecord(a.INFO,b))},warn:function(){var b=[].slice.call(arguments,0);this.handle(this.makeRecord(a.WARNING,b))},error:function(){var b=[].slice.call(arguments,0);this.handle(this.makeRecord(a.ERROR,b))},debug:function(){var b=[].slice.call(arguments,0);this.handle(this.makeRecord(a.DEBUG,b))},log:function(){var b=[].slice.call(arguments,0);this.handle(this.makeRecord(a.NOTSET,b))},makeRecord:function(a,c){return{name:b,level:a,items:c}},handle:function(a){if(a.level>=this.level)if(this.handlers.length>0){var c;for(c=0;c<this.handlers.length;c++)this.handlers[c].handle(a)}else this._warnedAboutNoHandlers||(console.warn("No handlers could be found for logger "+b),this._warnedAboutNoHandlers=!0)},addHandler:function(a){this.handlers.push(a)},setLevel:function(a){this.level=a}}};return b.getLogger=function(a){return void 0===a&&(a="defaultLogger"),a in c||(c[a]=d(a)),c[a]},b}]),angular.module("jv.angular-logging").service("jvBaseHandler",["jvFormat","JvFormatter","jvLogLevel",function(a,b,c){return{level:c.NOTSET,formatter:new b(a.DATE("HH:mm:ss,sss"),a.NAME,a.MESSAGES),handle:function(a){a.level>=this.level&&this.emit(a)},setLevel:function(a){this.level=a},getLevel:function(){return this.level},setFormatter:function(a){this.formatter=a},getFormatter:function(){return this.formatter}}}]),angular.module("jv.angular-logging").service("JvConsoleHandler",["jvBaseHandler","jvLogLevel",function(a,b){return function(){return angular.extend({emit:function(a){var c=this.getFormatter().format(a);switch(a.level){case b.INFO:console.info.apply(console,c);break;case b.WARNING:console.warn.apply(console,c);break;case b.ERROR:console.error.apply(console,c);break;case b.DEBUG:console.debug.apply(console,c);break;default:console.log.apply(console,c)}}},a)}}]),angular.module("jv.angular-logging").service("CustomHandler",["jvBaseHandler",function(a){return function(){return angular.extend({emit:function(a){console.log(a)}},a)}}]),angular.module("jv.angular-logging").config(["$provide",function(a){a.decorator("$log",["$delegate","jvLogging","jvLoggingConfig",function(a,b,c){return c.getDecorateLog()&&(a=b.getLogger(c.getDecoratorLogger())),a}]),a.decorator("jvLogging",["$delegate","JvConsoleHandler",function(a,b){return a.getLogger().addHandler(new b),a}])}]).provider("jvLoggingConfig",function(){var a,b=!1;this.setDecorateLog=function(a){b=a},this.getDecorateLog=function(){return b},this.setDecoratorLogger=function(b){a=b},this.getDecoratorLogger=function(){return a},this.$get=function(){return this}});